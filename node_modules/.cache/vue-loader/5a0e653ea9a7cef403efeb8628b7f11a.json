{"remainingRequest":"/home/tarena/dashopt_bv/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/tarena/dashopt_bv/src/views/changePassword.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/tarena/dashopt_bv/src/views/changePassword.vue","mtime":1598357951751},{"path":"/home/tarena/dashopt_bv/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/tarena/dashopt_bv/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/tarena/dashopt_bv/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/tarena/dashopt_bv/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAibG9naW4iLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBmb3JtOiB7CiAgICAgICAgb2xkX3Bhc3N3b3JkOiAiIiwKICAgICAgICBwYXNzd29yZDE6ICIiLAogICAgICAgIHBhc3N3b3JkMjogIiIKICAgICAgfSwKICAgICAgbXNnX29sZF9wYXNzd29yZDogIuaXp+Wvhueggeato+ehrlxuIiwKICAgICAgbXNnX3Bhc3N3b3JkOiAi5a+G56CB5q2j56GuXG4iLAogICAgICBzaG93OiB0cnVlLAogICAgICBqdW1wOiB0cnVlCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgb25TdWJtaXQoZXZ0KSB7CiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICB2YXIgcmVnZXhfb2xkX3Bhc3N3b3JkID0gL14oPz0uKlxkKSg/PS4qW2Etel0pKD89LipbQS1aXSkuezUsMTJ9JC87CiAgICAgIHZhciByZWdleF9wYXNzd29yZCA9IC9eKD89LipcZCkoPz0uKlthLXpdKSg/PS4qW0EtWl0pLns1LDEyfSQvOwogICAgICBpZiAoIXJlZ2V4X29sZF9wYXNzd29yZC50ZXN0KHRoaXMuZm9ybS5vbGRfcGFzc3dvcmQpKSB7CiAgICAgICAgdGhpcy5tc2dfb2xkX3Bhc3N3b3JkID0gIuaXp+WvhueggemUmeivr1xuIjsKICAgICAgICB0aGlzLmp1bXAgPSBmYWxzZTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuZm9ybS5wYXNzd29yZDEgPT09IHRoaXMuZm9ybS5wYXNzd29yZDIpIHsKICAgICAgICBpZiAoIXJlZ2V4X3Bhc3N3b3JkLnRlc3QodGhpcy5mb3JtLnBhc3N3b3JkMSkpIHsKICAgICAgICAgIHRoaXMubXNnX3Bhc3N3b3JkID0gIuWvhueggemUmeivr1xuIjsKICAgICAgICAgIHRoaXMuanVtcCA9IGZhbHNlOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLm1zZ19wYXNzd29yZCA9ICLkuKTmrKHlr4bnoIHkuI3kuIDoh7RcbiI7CiAgICAgICAgdGhpcy5qdW1wID0gZmFsc2U7CiAgICAgIH0KICAgICAgaWYgKCF0aGlzLmp1bXApIHsKICAgICAgICBhbGVydCh0aGlzLm1zZ19vbGRfcGFzc3dvcmQgKyB0aGlzLm1zZ19wYXNzd29yZCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgYXhpb3MKICAgICAgICAgIC5wb3N0KCJodHRwOi8vMTI3LjAuMC4xOjgwMDAvdjEvdXNlcnMvbW9kaWZ5IiwgewogICAgICAgICAgICBvbGRfcGFzc3dvcmQ6IHRoaXMuZm9ybS5vbGRfcGFzc3dvcmQsCiAgICAgICAgICAgIG5ld19wYXNzd29yZDogdGhpcy5mb3JtLnBhc3N3b3JkMSwKICAgICAgICAgICAgdXNlcm5hbWU6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJkYXNob3B0X2J2X3VzZXIiKQogICAgICAgICAgfSkKICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7CiAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLmNvZGUgPT0gMjAwKSB7CiAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oImRhc2hvcHRfYnZfdXNlciIpOwogICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCJkYXNob3B0X2J2X3Rva2VuIik7CiAgICAgICAgICAgICAgYWxlcnQoIuS/ruaUueaIkOWKnyzot7PovazliLDnmbvlvZXpobUiKTsKICAgICAgICAgICAgICAodGhpcy5mb3JtLm9sZF9wYXNzd29yZCA9ICIiKSwKICAgICAgICAgICAgICAgICh0aGlzLmZvcm0ucGFzc3dvcmQxID0gIiIpLAogICAgICAgICAgICAgICAgKHRoaXMuZm9ybS5wYXNzd29yZDIgPSAiIiksCiAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiL3JlZ2lzdGVyIik7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgYWxlcnQoIkVSUk9SIik7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfQp9Owo="},{"version":3,"sources":["changePassword.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"changePassword.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    <b-form @submit=\"onSubmit\" v-if=\"show\">\n      <b-form-group id=\"input-group-name\" label=\"旧密码:\" label-for=\"input-name\">\n        <b-form-input\n          id=\"input-old_password\"\n          v-model=\"form.old_password\"\n          required\n          placeholder=\"Enter old_password\"\n          type=\"password\"\n        ></b-form-input>\n        <b-alert show variant=\"light\">必须包含大小写字母和数字的组合，不能使用特殊字符，长度在6-12字节</b-alert>\n      </b-form-group>\n      <b-form-group id=\"input-group-password1\" label=\"输入新密码:\" label-for=\"input-password1\">\n        <b-form-input\n          id=\"input-password1\"\n          v-model=\"form.password1\"\n          required\n          placeholder=\"请输入新密码\"\n          type=\"password\"\n        ></b-form-input>\n        <b-alert show variant=\"light\">必须包含大小写字母和数字的组合，不能使用特殊字符，长度在6-12字节</b-alert>\n      </b-form-group>\n      <b-form-group id=\"input-group-password2\" label=\"再次输入新密码:\" label-for=\"input-2\">\n        <b-form-input\n          id=\"input-password2\"\n          v-model=\"form.password2\"\n          required\n          placeholder=\"请输入新密码\"\n          type=\"password\"\n        ></b-form-input>\n        <b-alert show variant=\"light\">两次密码需一致</b-alert>\n      </b-form-group>\n      <b-button type=\"submit\" variant=\"primary\">Submit</b-button>\n    </b-form>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nexport default {\n  name: \"login\",\n  data() {\n    return {\n      form: {\n        old_password: \"\",\n        password1: \"\",\n        password2: \"\"\n      },\n      msg_old_password: \"旧密码正确\\n\",\n      msg_password: \"密码正确\\n\",\n      show: true,\n      jump: true\n    };\n  },\n  methods: {\n    onSubmit(evt) {\n      evt.preventDefault();\n      var regex_old_password = /^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{5,12}$/;\n      var regex_password = /^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{5,12}$/;\n      if (!regex_old_password.test(this.form.old_password)) {\n        this.msg_old_password = \"旧密码错误\\n\";\n        this.jump = false;\n      }\n\n      if (this.form.password1 === this.form.password2) {\n        if (!regex_password.test(this.form.password1)) {\n          this.msg_password = \"密码错误\\n\";\n          this.jump = false;\n        }\n      } else {\n        this.msg_password = \"两次密码不一致\\n\";\n        this.jump = false;\n      }\n      if (!this.jump) {\n        alert(this.msg_old_password + this.msg_password);\n      } else {\n        axios\n          .post(\"http://127.0.0.1:8000/v1/users/modify\", {\n            old_password: this.form.old_password,\n            new_password: this.form.password1,\n            username: localStorage.getItem(\"dashopt_bv_user\")\n          })\n          .then(function(response) {\n            if (response.data.code == 200) {\n              localStorage.removeItem(\"dashopt_bv_user\");\n              localStorage.removeItem(\"dashopt_bv_token\");\n              alert(\"修改成功,跳转到登录页\");\n              (this.form.old_password = \"\"),\n                (this.form.password1 = \"\"),\n                (this.form.password2 = \"\"),\n                this.$router.push(\"/register\");\n            } else {\n              alert(\"ERROR\");\n            }\n          });\n      }\n    }\n  }\n};\n</script>\n\n"]}]}