{"remainingRequest":"/home/tarena/dashopt_bv/node_modules/babel-loader/lib/index.js!/home/tarena/dashopt_bv/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/tarena/dashopt_bv/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/tarena/dashopt_bv/src/views/changePassword.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/tarena/dashopt_bv/src/views/changePassword.vue","mtime":1598357951751},{"path":"/home/tarena/dashopt_bv/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/tarena/dashopt_bv/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/tarena/dashopt_bv/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/tarena/dashopt_bv/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJsb2dpbiIsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGZvcm06IHsKICAgICAgICBvbGRfcGFzc3dvcmQ6ICIiLAogICAgICAgIHBhc3N3b3JkMTogIiIsCiAgICAgICAgcGFzc3dvcmQyOiAiIgogICAgICB9LAogICAgICBtc2dfb2xkX3Bhc3N3b3JkOiAi5pen5a+G56CB5q2j56GuXG4iLAogICAgICBtc2dfcGFzc3dvcmQ6ICLlr4bnoIHmraPnoa5cbiIsCiAgICAgIHNob3c6IHRydWUsCiAgICAgIGp1bXA6IHRydWUKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBvblN1Ym1pdDogZnVuY3Rpb24gb25TdWJtaXQoZXZ0KSB7CiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICB2YXIgcmVnZXhfb2xkX3Bhc3N3b3JkID0gL14oPz0uKlxkKSg/PS4qW2Etel0pKD89LipbQS1aXSkuezUsMTJ9JC87CiAgICAgIHZhciByZWdleF9wYXNzd29yZCA9IC9eKD89LipcZCkoPz0uKlthLXpdKSg/PS4qW0EtWl0pLns1LDEyfSQvOwoKICAgICAgaWYgKCFyZWdleF9vbGRfcGFzc3dvcmQudGVzdCh0aGlzLmZvcm0ub2xkX3Bhc3N3b3JkKSkgewogICAgICAgIHRoaXMubXNnX29sZF9wYXNzd29yZCA9ICLml6flr4bnoIHplJnor69cbiI7CiAgICAgICAgdGhpcy5qdW1wID0gZmFsc2U7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLmZvcm0ucGFzc3dvcmQxID09PSB0aGlzLmZvcm0ucGFzc3dvcmQyKSB7CiAgICAgICAgaWYgKCFyZWdleF9wYXNzd29yZC50ZXN0KHRoaXMuZm9ybS5wYXNzd29yZDEpKSB7CiAgICAgICAgICB0aGlzLm1zZ19wYXNzd29yZCA9ICLlr4bnoIHplJnor69cbiI7CiAgICAgICAgICB0aGlzLmp1bXAgPSBmYWxzZTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5tc2dfcGFzc3dvcmQgPSAi5Lik5qyh5a+G56CB5LiN5LiA6Ie0XG4iOwogICAgICAgIHRoaXMuanVtcCA9IGZhbHNlOwogICAgICB9CgogICAgICBpZiAoIXRoaXMuanVtcCkgewogICAgICAgIGFsZXJ0KHRoaXMubXNnX29sZF9wYXNzd29yZCArIHRoaXMubXNnX3Bhc3N3b3JkKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBheGlvcy5wb3N0KCJodHRwOi8vMTI3LjAuMC4xOjgwMDAvdjEvdXNlcnMvbW9kaWZ5IiwgewogICAgICAgICAgb2xkX3Bhc3N3b3JkOiB0aGlzLmZvcm0ub2xkX3Bhc3N3b3JkLAogICAgICAgICAgbmV3X3Bhc3N3b3JkOiB0aGlzLmZvcm0ucGFzc3dvcmQxLAogICAgICAgICAgdXNlcm5hbWU6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJkYXNob3B0X2J2X3VzZXIiKQogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5jb2RlID09IDIwMCkgewogICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgiZGFzaG9wdF9idl91c2VyIik7CiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCJkYXNob3B0X2J2X3Rva2VuIik7CiAgICAgICAgICAgIGFsZXJ0KCLkv67mlLnmiJDlip8s6Lez6L2s5Yiw55m75b2V6aG1Iik7CiAgICAgICAgICAgIHRoaXMuZm9ybS5vbGRfcGFzc3dvcmQgPSAiIiwgdGhpcy5mb3JtLnBhc3N3b3JkMSA9ICIiLCB0aGlzLmZvcm0ucGFzc3dvcmQyID0gIiIsIHRoaXMuJHJvdXRlci5wdXNoKCIvcmVnaXN0ZXIiKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGFsZXJ0KCJFUlJPUiIpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["changePassword.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuCA,OAAA,KAAA,MAAA,OAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,OADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,IAAA,EAAA;AACA,QAAA,YAAA,EAAA,EADA;AAEA,QAAA,SAAA,EAAA,EAFA;AAGA,QAAA,SAAA,EAAA;AAHA,OADA;AAMA,MAAA,gBAAA,EAAA,SANA;AAOA,MAAA,YAAA,EAAA,QAPA;AAQA,MAAA,IAAA,EAAA,IARA;AASA,MAAA,IAAA,EAAA;AATA,KAAA;AAWA,GAdA;AAeA,EAAA,OAAA,EAAA;AACA,IAAA,QADA,oBACA,GADA,EACA;AACA,MAAA,GAAA,CAAA,cAAA;AACA,UAAA,kBAAA,GAAA,yCAAA;AACA,UAAA,cAAA,GAAA,yCAAA;;AACA,UAAA,CAAA,kBAAA,CAAA,IAAA,CAAA,KAAA,IAAA,CAAA,YAAA,CAAA,EAAA;AACA,aAAA,gBAAA,GAAA,SAAA;AACA,aAAA,IAAA,GAAA,KAAA;AACA;;AAEA,UAAA,KAAA,IAAA,CAAA,SAAA,KAAA,KAAA,IAAA,CAAA,SAAA,EAAA;AACA,YAAA,CAAA,cAAA,CAAA,IAAA,CAAA,KAAA,IAAA,CAAA,SAAA,CAAA,EAAA;AACA,eAAA,YAAA,GAAA,QAAA;AACA,eAAA,IAAA,GAAA,KAAA;AACA;AACA,OALA,MAKA;AACA,aAAA,YAAA,GAAA,WAAA;AACA,aAAA,IAAA,GAAA,KAAA;AACA;;AACA,UAAA,CAAA,KAAA,IAAA,EAAA;AACA,QAAA,KAAA,CAAA,KAAA,gBAAA,GAAA,KAAA,YAAA,CAAA;AACA,OAFA,MAEA;AACA,QAAA,KAAA,CACA,IADA,CACA,uCADA,EACA;AACA,UAAA,YAAA,EAAA,KAAA,IAAA,CAAA,YADA;AAEA,UAAA,YAAA,EAAA,KAAA,IAAA,CAAA,SAFA;AAGA,UAAA,QAAA,EAAA,YAAA,CAAA,OAAA,CAAA,iBAAA;AAHA,SADA,EAMA,IANA,CAMA,UAAA,QAAA,EAAA;AACA,cAAA,QAAA,CAAA,IAAA,CAAA,IAAA,IAAA,GAAA,EAAA;AACA,YAAA,YAAA,CAAA,UAAA,CAAA,iBAAA;AACA,YAAA,YAAA,CAAA,UAAA,CAAA,kBAAA;AACA,YAAA,KAAA,CAAA,aAAA,CAAA;AACA,iBAAA,IAAA,CAAA,YAAA,GAAA,EAAA,EACA,KAAA,IAAA,CAAA,SAAA,GAAA,EADA,EAEA,KAAA,IAAA,CAAA,SAAA,GAAA,EAFA,EAGA,KAAA,OAAA,CAAA,IAAA,CAAA,WAAA,CAHA;AAIA,WARA,MAQA;AACA,YAAA,KAAA,CAAA,OAAA,CAAA;AACA;AACA,SAlBA;AAmBA;AACA;AA1CA;AAfA,CAAA","sourcesContent":["<template>\n  <div>\n    <b-form @submit=\"onSubmit\" v-if=\"show\">\n      <b-form-group id=\"input-group-name\" label=\"旧密码:\" label-for=\"input-name\">\n        <b-form-input\n          id=\"input-old_password\"\n          v-model=\"form.old_password\"\n          required\n          placeholder=\"Enter old_password\"\n          type=\"password\"\n        ></b-form-input>\n        <b-alert show variant=\"light\">必须包含大小写字母和数字的组合，不能使用特殊字符，长度在6-12字节</b-alert>\n      </b-form-group>\n      <b-form-group id=\"input-group-password1\" label=\"输入新密码:\" label-for=\"input-password1\">\n        <b-form-input\n          id=\"input-password1\"\n          v-model=\"form.password1\"\n          required\n          placeholder=\"请输入新密码\"\n          type=\"password\"\n        ></b-form-input>\n        <b-alert show variant=\"light\">必须包含大小写字母和数字的组合，不能使用特殊字符，长度在6-12字节</b-alert>\n      </b-form-group>\n      <b-form-group id=\"input-group-password2\" label=\"再次输入新密码:\" label-for=\"input-2\">\n        <b-form-input\n          id=\"input-password2\"\n          v-model=\"form.password2\"\n          required\n          placeholder=\"请输入新密码\"\n          type=\"password\"\n        ></b-form-input>\n        <b-alert show variant=\"light\">两次密码需一致</b-alert>\n      </b-form-group>\n      <b-button type=\"submit\" variant=\"primary\">Submit</b-button>\n    </b-form>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nexport default {\n  name: \"login\",\n  data() {\n    return {\n      form: {\n        old_password: \"\",\n        password1: \"\",\n        password2: \"\"\n      },\n      msg_old_password: \"旧密码正确\\n\",\n      msg_password: \"密码正确\\n\",\n      show: true,\n      jump: true\n    };\n  },\n  methods: {\n    onSubmit(evt) {\n      evt.preventDefault();\n      var regex_old_password = /^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{5,12}$/;\n      var regex_password = /^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{5,12}$/;\n      if (!regex_old_password.test(this.form.old_password)) {\n        this.msg_old_password = \"旧密码错误\\n\";\n        this.jump = false;\n      }\n\n      if (this.form.password1 === this.form.password2) {\n        if (!regex_password.test(this.form.password1)) {\n          this.msg_password = \"密码错误\\n\";\n          this.jump = false;\n        }\n      } else {\n        this.msg_password = \"两次密码不一致\\n\";\n        this.jump = false;\n      }\n      if (!this.jump) {\n        alert(this.msg_old_password + this.msg_password);\n      } else {\n        axios\n          .post(\"http://127.0.0.1:8000/v1/users/modify\", {\n            old_password: this.form.old_password,\n            new_password: this.form.password1,\n            username: localStorage.getItem(\"dashopt_bv_user\")\n          })\n          .then(function(response) {\n            if (response.data.code == 200) {\n              localStorage.removeItem(\"dashopt_bv_user\");\n              localStorage.removeItem(\"dashopt_bv_token\");\n              alert(\"修改成功,跳转到登录页\");\n              (this.form.old_password = \"\"),\n                (this.form.password1 = \"\"),\n                (this.form.password2 = \"\"),\n                this.$router.push(\"/register\");\n            } else {\n              alert(\"ERROR\");\n            }\n          });\n      }\n    }\n  }\n};\n</script>\n\n"],"sourceRoot":"src/views"}]}